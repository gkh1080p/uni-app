import{d as a,A as s,s as e,B as l,e as t,o as u,c as i,w as o,i as n,a as r,x as c,f as d,g as m,F as v,m as p,k as f}from"./index-DfAuioeV.js";import{_ as g}from"./uni-load-more.DIIr9nLj.js";import{a as _,c as h,d as y,o as L,b as w,e as j,r as x}from"./api.BC6ic0yS.js";import{a as b}from"./index.BEebywju.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=["https://tea.qingnian8.com/api/bizhi/wallList"],q=k({__name:"classList",setup(k){let q=a(""),F=a(""),N=a(1),T=a();const z=a(!1);h((async a=>{a.type&&(T.value=a.type),a.id&&(q.value=a.id),F.value=a.name,s({title:a.name}),B()})),y((()=>{z.value||function(a,s){let e;return function(){e&&clearTimeout(e),e=setTimeout((()=>{a.call(this,arguments)}),s),e=null}}((()=>{N.value++,B(N.value)}),1e3)()}));const A=a([]),B=async(a=1,s=12)=>{try{let l;if(q.value&&(l=await((a,s,e)=>_(C[0],{classid:a,pageNum:s,pageNum:s}))(q.value,a)),T.value&&(l=await b(T.value,a,s)),0!==l.data.errCode)throw new Error("密钥出错");A.value=[...A.value,...l.data.data],e("storeClassList",A.value),l.data.data.length<s&&(z.value=!0)}catch(l){console.log(l)}};return L((a=>({title:"好果子图画",path:"/pages/classList/classList?id="+q.value+"&name="+F.value}))),w((()=>({title:"好果子壁纸",query:"id="+q.value+"&name="+F.value}))),j((()=>{l("storeClassList")})),(a,s)=>{const e=x(t("uni-load-more"),g),l=n,_=p,h=f;return u(),i(l,{class:"classList"},{default:o((()=>[!A.value.length&&z.value?(u(),i(l,{key:0,class:"loadingLayout"},{default:o((()=>[r(e,{status:"loading"})])),_:1})):c("",!0),r(l,{class:"content"},{default:o((()=>[(u(!0),d(v,null,m(A.value,(a=>(u(),i(h,{url:"/pages/preview/preview?id="+a._id,class:"item",key:a._id},{default:o((()=>[r(_,{src:a.smallPicurl,mode:"aspectFill"},null,8,["src"])])),_:2},1032,["url"])))),128))])),_:1}),r(l,{class:"loadingLayout"},{default:o((()=>[r(e,{status:z.value?"noMore":"loading"},null,8,["status"])])),_:1}),r(l,{class:"safe-area-inset-bottom"})])),_:1})}}},[["__scopeId","data-v-c683480d"]]);export{q as default};
