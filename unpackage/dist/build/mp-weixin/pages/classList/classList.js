"use strict";const e=require("../../common/vendor.js"),a=require("../../api/classList/index.js"),t=require("../../api/user/index.js");if(!Array){e.resolveComponent("uni-load-more")()}Math;const l={__name:"classList",setup(l){let s=e.ref(""),i=e.ref(""),r=e.ref(1),n=e.ref();const o=e.ref(!1);e.onLoad((async a=>{a.type&&(n.value=a.type),a.id&&(s.value=a.id),i.value=a.name,e.index.setNavigationBarTitle({title:a.name}),v()})),e.onReachBottom((()=>{o.value||function(e,a){let t;return function(){t&&clearTimeout(t),t=setTimeout((()=>{e.call(this,arguments)}),a),t=null}}((()=>{r.value++,v(r.value)}),1e3)()}));const u=e.ref([]),v=async(l=1,i=12)=>{try{let r;if(s.value&&(r=await a.getClassListUrl(s.value,l,i)),n.value&&(r=await t.getHistoryList(n.value,l,i)),0!==r.data.errCode)throw new Error("密钥出错");u.value=[...u.value,...r.data.data],e.index.setStorageSync("storeClassList",u.value),r.data.data.length<i&&(o.value=!0)}catch(r){console.log(r)}};return e.onShareAppMessage((e=>({title:"好果子图画",path:"/pages/classList/classList?id="+s.value+"&name="+i.value}))),e.onShareTimeline((()=>({title:"好果子壁纸",query:"id="+s.value+"&name="+i.value}))),e.onUnload((()=>{e.index.removeStorageSync("storeClassList")})),(a,t)=>e.e({a:!u.value.length&&o.value},!u.value.length&&o.value?{b:e.p({status:"loading"})}:{},{c:e.f(u.value,((e,a,t)=>({a:e.smallPicurl,b:"/pages/preview/preview?id="+e._id,c:e._id}))),d:e.p({status:o.value?"noMore":"loading"})})}},s=e._export_sfc(l,[["__scopeId","data-v-c683480d"]]);l.__runtimeHooks=6,wx.createPage(s);
